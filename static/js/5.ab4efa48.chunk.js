(this["webpackJsonpsocial-network-ts"]=this["webpackJsonpsocial-network-ts"]||[]).push([[5],{428:function(e,t,r){e.exports={profile:"profile_profile__2gMKd",profile__postTitle:"profile_profile__postTitle__H2b-o",profile__info:"profile_profile__info__1_Kve",profile__info_img:"profile_profile__info_img__3MAes",profile__info_text:"profile_profile__info_text__jjPkj",profile__posts:"profile_profile__posts__15hxo",profile__addPost:"profile_profile__addPost__3MWLG",profile__addPost_input:"profile_profile__addPost_input__1wZ-Y",profile__addPost_btn:"profile_profile__addPost_btn__1Nt5B"}},432:function(e,t,r){"use strict";t.a=r.p+"static/media/ava.c429bb80.png"},433:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(1),i=r(19),a=(r(0),r(6));function o(e){return function(t){var r=Object(i.h)().userID,o=Object(i.g)();return Object(a.jsx)(e,Object(n.a)(Object(n.a)({},t),{},{userIdFromURL:r,navigate:o}))}}},443:function(e,t,r){e.exports={post:"post_post__2yxHn",post_message:"post_post_message__2IZXH",post_like:"post_post_like__8OBoH"}},452:function(e,t,r){"use strict";r.r(t);var n=r(1),i=r(11),a=r(10),o=r(14),c=r(13),u=r(12),s=r(0),l=r.n(s),d=r(428),f=r.n(d),p=r(3),b=r(29),j=r(5),m=r(17),v=r.n(m),h=r(6),O=l.a.memo((function(e){var t=e.status,r=e.authId,n=e.userIdFromURL,i=e.updateStatusCallback,a=Object(s.useState)(!1),o=Object(j.a)(a,2),c=o[0],u=o[1],l=Object(s.useState)(""),d=Object(j.a)(l,2),f=d[0],p=d[1];Object(s.useEffect)((function(){p(t||"")}),[t]);return Object(h.jsx)(h.Fragment,{children:c?Object(h.jsx)("input",{autoFocus:!0,type:"text",value:f,onBlur:function(){i(f),u(!1)},onChange:function(e){return p(e.currentTarget.value)}}):t||r!==Number(n)?Object(h.jsx)("span",{onDoubleClick:function(){r===Number(n)&&u(!0)},children:f}):Object(h.jsx)("button",{onClick:function(){return u(!0)},children:"+"})})})),_=function(e){Object(o.a)(r,e);var t=Object(c.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).state={error:null,errorInfo:null},n}return Object(i.a)(r,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function(){return this.state.errorInfo?Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Something went wrong."}),Object(h.jsxs)("details",{style:{whiteSpace:"pre-wrap"},children:[this.state.error&&this.state.error.toString(),Object(h.jsx)("br",{}),this.state.errorInfo.componentStack]})]}):this.props.children}}]),r}(l.a.Component),x=r(432),g=r(2),y=r(53),k=r(155),S=["render","children","component"];function P(e,t,r){var n=e.render,i=e.children,a=e.component,o=Object(y.a)(e,S);if(a)return s.createElement(a,Object.assign(t,o,{children:i,render:n}));if(n)return n(void 0===i?Object.assign(t,o):Object.assign(t,o,{children:i}));if("function"!==typeof i)throw new Error("Must specify either a render prop, a render function as children, or a component prop to "+r);return i(Object.assign(t,o))}function C(e,t,r){void 0===r&&(r=function(e,t){return e===t});var n=l.a.useRef(e);l.a.useEffect((function(){r(e,n.current)||(t(),n.current=e)}))}var F=function(e,t){if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var i=Object.prototype.hasOwnProperty.bind(t),a=0;a<r.length;a++){var o=r[a];if(!i(o)||e[o]!==t[o])return!1}return!0},E=function(e){return!(!e||"function"!==typeof e.stopPropagation)},w=s.createContext();function I(e){var t=l.a.useRef(e);return l.a.useEffect((function(){t.current=e})),t}var N=function(e,t,r){r.forEach((function(r){Object.defineProperty(e,r,{get:function(){return t[r]},enumerable:!0})}))},V=function(e,t){return N(e,t,["active","dirty","dirtyFields","dirtySinceLastSubmit","dirtyFieldsSinceLastSubmit","error","errors","hasSubmitErrors","hasValidationErrors","initialValues","invalid","modified","modifiedSinceLastSubmit","pristine","submitError","submitErrors","submitFailed","submitSucceeded","submitting","touched","valid","validating","values","visited"])},D=["debug","decorators","destroyOnUnregister","form","initialValues","initialValuesEqual","keepDirtyOnReinitialize","mutators","onSubmit","subscription","validate","validateOnBlur"],U={"final-form":k.e,"react-final-form":"6.5.8"},A=k.d.reduce((function(e,t){return e[t]=!0,e}),{});function R(e){var t=e.debug,r=e.decorators,n=void 0===r?[]:r,i=e.destroyOnUnregister,a=e.form,o=e.initialValues,c=e.initialValuesEqual,u=e.keepDirtyOnReinitialize,d=e.mutators,f=e.onSubmit,p=e.subscription,b=void 0===p?A:p,j=e.validate,m=e.validateOnBlur,v=Object(y.a)(e,D),h={debug:t,destroyOnUnregister:i,initialValues:o,keepDirtyOnReinitialize:u,mutators:d,onSubmit:f,validate:j,validateOnBlur:m},O=function(e){var t=l.a.useRef();return t.current||(t.current=e()),t.current}((function(){var e=a||Object(k.b)(h);return e.pauseValidation(),e})),_=s.useState((function(){var e={};return O.subscribe((function(t){e=t}),b)(),e})),x=_[0],S=_[1],N=I(x);s.useEffect((function(){O.isValidationPaused()&&O.resumeValidation();var e=[O.subscribe((function(e){F(e,N.current)||S(e)}),b)].concat(n?n.map((function(e){return e(O)})):[]);return function(){O.pauseValidation(),e.reverse().forEach((function(e){return e()}))}}),n),C(t,(function(){O.setConfig("debug",t)})),C(i,(function(){O.destroyOnUnregister=!!i})),C(u,(function(){O.setConfig("keepDirtyOnReinitialize",u)})),C(o,(function(){O.setConfig("initialValues",o)}),c||F),C(d,(function(){O.setConfig("mutators",d)})),C(f,(function(){O.setConfig("onSubmit",f)})),C(j,(function(){O.setConfig("validate",j)})),C(m,(function(){O.setConfig("validateOnBlur",m)}));var R={form:Object(g.a)({},O,{reset:function(e){E(e)?O.reset():O.reset(e)}}),handleSubmit:function(e){return e&&("function"===typeof e.preventDefault&&e.preventDefault(),"function"===typeof e.stopPropagation&&e.stopPropagation()),O.submit()}};return V(R,x),s.createElement(w.Provider,{value:O},P(Object(g.a)({},v,{__versions:U}),R,"ReactFinalForm"))}function B(e){var t=s.useContext(w);if(!t)throw new Error((e||"useForm")+" must be used inside of a <Form> component");return t}var L="undefined"!==typeof window&&window.navigator&&window.navigator.product&&"ReactNative"===window.navigator.product;function M(e){var t=s.useRef(e);return s.useEffect((function(){t.current=e})),s.useCallback((function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.current.apply(null,r)}),[])}var J=k.c.reduce((function(e,t){return e[t]=!0,e}),{}),K=function(e,t){return void 0===e?"":e},q=function(e,t){return""===e?void 0:e},z=function(e,t){return e===t};function H(e,t){void 0===t&&(t={});var r=t,n=r.afterSubmit,i=r.allowNull,a=r.component,o=r.data,c=r.defaultValue,u=r.format,l=void 0===u?K:u,d=r.formatOnBlur,f=r.initialValue,p=r.multiple,b=r.parse,j=void 0===b?q:b,m=r.subscription,v=void 0===m?J:m,h=r.type,O=r.validateFields,_=r.value,x=B("useField"),g=I(t),y=function(t,r){return x.registerField(e,t,v,{afterSubmit:n,beforeSubmit:function(){var t=g.current,r=t.beforeSubmit,n=t.formatOnBlur,i=t.format,a=void 0===i?K:i;if(n){var o=x.getFieldState(e).value,c=a(o,e);c!==o&&x.change(e,c)}return r&&r()},data:o,defaultValue:c,getValidator:function(){return g.current.validate},initialValue:f,isEqual:function(e,t){return(g.current.isEqual||z)(e,t)},silent:r,validateFields:O})},k=s.useRef(!0),S=s.useState((function(){var e={},t=x.destroyOnUnregister;return x.destroyOnUnregister=!1,y((function(t){e=t}),!0)(),x.destroyOnUnregister=t,e})),P=S[0],C=S[1];s.useEffect((function(){return y((function(e){k.current?k.current=!1:C(e)}),!1)}),[e,o,c,f]);var F={};!function(e,t){N(e,t,["active","data","dirty","dirtySinceLastSubmit","error","initial","invalid","length","modified","modifiedSinceLastSubmit","pristine","submitError","submitFailed","submitSucceeded","submitting","touched","valid","validating","visited"])}(F,P);var E={name:e,get value(){var t=P.value;return d?"input"===a&&(t=K(t)):t=l(t,e),null!==t||i||(t=""),"checkbox"===h||"radio"===h?_:"select"===a&&p?t||[]:t},get checked(){var t=P.value;return"checkbox"===h?(t=l(t,e),void 0===_?!!t:!(!Array.isArray(t)||!~t.indexOf(_))):"radio"===h?l(t,e)===_:void 0},onBlur:M((function(e){if(P.blur(),d){var t=x.getFieldState(P.name);P.change(l(t.value,P.name))}})),onChange:M((function(t){var r=t&&t.target?function(e,t,r,n){if(!n&&e.nativeEvent&&void 0!==e.nativeEvent.text)return e.nativeEvent.text;if(n&&e.nativeEvent)return e.nativeEvent.text;var i=e.target,a=i.type,o=i.value,c=i.checked;switch(a){case"checkbox":if(void 0!==r){if(c)return Array.isArray(t)?t.concat(r):[r];if(!Array.isArray(t))return t;var u=t.indexOf(r);return u<0?t:t.slice(0,u).concat(t.slice(u+1))}return!!c;case"select-multiple":return function(e){var t=[];if(e)for(var r=0;r<e.length;r++){var n=e[r];n.selected&&t.push(n.value)}return t}(e.target.options);default:return o}}(t,P.value,_,L):t;P.change(j(r,e))})),onFocus:M((function(e){return P.focus()}))};return p&&(E.multiple=p),void 0!==h&&(E.type=h),{input:E,meta:F}}var T=["afterSubmit","allowNull","beforeSubmit","children","component","data","defaultValue","format","formatOnBlur","initialValue","isEqual","multiple","name","parse","subscription","type","validate","validateFields","value"],Y=s.forwardRef((function(e,t){var r=e.afterSubmit,n=e.allowNull,i=e.beforeSubmit,a=e.children,o=e.component,c=e.data,u=e.defaultValue,l=e.format,d=e.formatOnBlur,f=e.initialValue,p=e.isEqual,b=e.multiple,j=e.name,m=e.parse,v=e.subscription,h=e.type,O=e.validate,_=e.validateFields,x=e.value,k=Object(y.a)(e,T),S=H(j,{afterSubmit:r,allowNull:n,beforeSubmit:i,children:a,component:o,data:c,defaultValue:u,format:l,formatOnBlur:d,initialValue:f,isEqual:p,multiple:b,parse:m,subscription:v,type:h,validate:O,validateFields:_,value:x});if("function"===typeof a)return a(Object(g.a)({},S,k));if("string"===typeof o)return s.createElement(o,Object(g.a)({},S.input,{children:a,ref:t},k));if(!j)throw new Error("prop name cannot be undefined in <Field> component");return P(Object(g.a)({children:a,component:o,ref:t},k),S,"Field("+j+")")}));var Z=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.reduce((function(t,r){return t||r(e)}),void 0)}},G=l.a.memo((function(e){var t=e.name,r=e.validators,i=e.type,a=e.placeholder,o=e.label;e.submitError;return Object(h.jsx)(Y,{name:t,validate:r&&Z(r),children:function(e){var t=e.input,r=e.meta;return Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{children:o}),Object(h.jsx)("input",Object(n.a)(Object(n.a)({},t),{},{type:i,placeholder:a})),r.error&&r.touched&&Object(h.jsx)("span",{children:r.error})]})}})})),W=["profileUserInfo","updatePhotoCallback","authId","updateProfileDataCallback"],X=l.a.memo((function(e){var t=e.profileUserInfo,r=e.updatePhotoCallback,i=e.authId,a=e.updateProfileDataCallback,o=Object(u.a)(e,W),c=t.fullName,l=t.userId,d=t.photos,m=t.contacts,g=Object.keys(t.contacts),y=Object(s.useState)(!1),S=Object(j.a)(y,2),P=S[0],C=S[1],F=function(){var e=Object(b.a)(v.a.mark((function e(t){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(t);case 2:if(1!==(r=e.sent).resultCode){e.next=7;break}return e.abrupt("return",Object(p.a)({},k.a,r.messages[0]));case 7:C(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)(_,{children:Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:f.a.profile__info,children:[Object(h.jsxs)("div",{className:f.a.profile__info_img,children:[Object(h.jsx)("img",{src:null!==d.large?d.large:x.a,alt:"Profile photo"}),i===Number(l)&&Object(h.jsx)("div",{children:Object(h.jsx)("input",{type:"file",onChange:function(e){return e.target.files&&r(e.target.files[0])}})})]}),Object(h.jsxs)("div",{className:f.a.profile__info_text,children:[Object(h.jsx)("h3",{children:c}),Object(h.jsx)(O,Object(n.a)(Object(n.a)({},o),{},{authId:i})),Object(h.jsx)("h4",{children:m.github})]})]}),P?Object(h.jsx)(ee,{onSubmit:F,contactsKeys:g,initialValues:t}):Object(h.jsx)(Q,{profileUserInfo:t,setEditMode:C,contactsKeys:g})]})})})),Q=function(e){var t=e.profileUserInfo,r=e.setEditMode,n=e.contactsKeys;return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("h4",{children:"aboutMe"}),Object(h.jsx)("span",{children:t.aboutMe})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("h4",{children:"lookingForAJob"}),Object(h.jsx)("span",{children:t.lookingForAJob?"Yes":"No"})]}),t.lookingForAJob&&Object(h.jsxs)("div",{children:[Object(h.jsx)("h4",{children:"lookingForAJobDescription"}),Object(h.jsx)("span",{children:t.lookingForAJobDescription})]}),n.map((function(e){return Object(h.jsx)($,{contactKey:e,value:t.contacts[e]},e)})),Object(h.jsx)("button",{onClick:function(){return r(!0)},children:"Edit"})]})},$=function(e){var t=e.contactKey,r=e.value;return Object(h.jsxs)("div",{children:[Object(h.jsx)("h4",{children:t}),Object(h.jsx)("span",{children:null!==r?r:"no"})]})},ee=function(e){var t=e.onSubmit,r=e.contactsKeys,n=e.initialValues;return Object(h.jsx)(R,{onSubmit:t,initialValues:n,render:function(e){var t=e.handleSubmit,n=e.submitError;return Object(h.jsxs)("form",{onSubmit:t,children:[Object(h.jsx)("h2",{children:"Profile Info"}),Object(h.jsx)("div",{children:Object(h.jsx)(G,{type:"text",placeholder:"fullName",name:"fullName"})}),Object(h.jsx)("div",{children:Object(h.jsx)(G,{type:"text",placeholder:"aboutMe",name:"aboutMe"})}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{children:"lookingForAJob"}),Object(h.jsx)(G,{type:"checkbox",name:"lookingForAJob"})]}),Object(h.jsx)("div",{children:Object(h.jsx)(G,{type:"text",placeholder:"lookingForAJobDescription",name:"lookingForAJobDescription"})}),Object(h.jsx)("h2",{children:"Contacts"}),r.map((function(e){return Object(h.jsx)(G,{type:"text",placeholder:e,name:"contacts.".concat(e),submitError:n})})),Object(h.jsx)("button",{type:"submit",children:"Submit"}),n&&Object(h.jsx)("span",{style:{color:"red"},children:n})]})}})},te=l.a.memo((function(e){var t=e.addPostCallback;return Object(h.jsx)(_,{children:Object(h.jsx)("div",{className:f.a.profile__addPost,children:Object(h.jsx)(R,{onSubmit:function(e){var r=e.post;return t(r)},render:function(e){var t=e.handleSubmit;return Object(h.jsxs)("form",{onSubmit:t,children:[Object(h.jsx)("div",{children:Object(h.jsx)(G,{type:"text",placeholder:"Add new message",name:"post",className:"messages__addPost_btn"})}),Object(h.jsx)("button",{type:"submit",className:f.a.messages__addPost_btn,children:"Add"})]})}})})})})),re=r(443),ne=r.n(re),ie=function(e){return Object(h.jsxs)("div",{className:ne.a.post,children:[Object(h.jsx)("p",{className:ne.a.post_message,children:e.message}),Object(h.jsx)("button",{className:ne.a.post_like,children:e.like})]})},ae=function(e){var t=e.posts;return Object(h.jsxs)(_,{children:[Object(h.jsx)("h3",{className:f.a.profile__postTitle,children:"My posts"}),Object(h.jsx)("div",{className:f.a.profile__posts,children:t.map((function(e){return Object(h.jsx)(ie,{id:e.id,message:e.message,like:e.like},e.id)}))})]})},oe=["posts","addPostCallback"],ce=l.a.memo((function(e){var t=e.posts,r=e.addPostCallback,i=Object(u.a)(e,oe);return Object(h.jsxs)("div",{className:f.a.profile,children:[Object(h.jsx)(X,Object(n.a)({},i)),Object(h.jsx)(ae,{posts:t}),Object(h.jsx)(te,{addPostCallback:r})]})})),ue=r(35),se=r(206),le=r(433),de=r(82),fe=r(149),pe=function(e){return e.profilePage.profileUserInfo},be=function(e){return e.profilePage.posts},je=function(e){return e.authState.id},me=function(e){return e.profilePage.status},ve=function(e){Object(o.a)(r,e);var t=Object(c.a)(r);function r(){var e;Object(a.a)(this,r);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).loadProfileData=function(){var t=Number(e.props.userIdFromURL);t||(t=e.props.authId),e.props.getProfileUserInfo(t),e.props.getProfileStatus(t)},e.componentDidMount=function(){return e.loadProfileData()},e.componentDidUpdate=function(t){var r=e.props.userIdFromURL,n=t.userIdFromURL,i=t.profileUserInfo.photos.large,a=e.props.profileUserInfo.photos.large;(r!==n||a!==i)&&e.loadProfileData()},e.addPostCallback=function(t){return e.props.addPost(t)},e.updateStatusCallback=function(t){return e.props.updateProfileStatus(t)},e.updatePhotoCallback=function(t){return e.props.uploadProfilePhoto(t)},e.updateProfileDataCallback=function(t){return e.props.updateProfileData(t)},e.render=function(){return Object(h.jsx)(ce,Object(n.a)(Object(n.a)({},e.props),{},{userIdFromURL:e.props.userIdFromURL,updateProfileDataCallback:e.updateProfileDataCallback,updatePhotoCallback:e.updatePhotoCallback,addPostCallback:e.addPostCallback,updateStatusCallback:e.updateStatusCallback}))},e}return Object(i.a)(r)}(s.PureComponent);t.default=Object(de.c)(Object(ue.b)((function(e){return{profileUserInfo:pe(e),posts:be(e),authId:je(e),status:me(e)}}),{getProfileUserInfo:se.c,addPost:se.a,getProfileStatus:se.b,updateProfileStatus:se.e,uploadProfilePhoto:se.f,updateProfileData:se.d}),le.a,fe.a)(ve)}}]);
//# sourceMappingURL=5.ab4efa48.chunk.js.map